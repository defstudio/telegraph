{"_path":"/webhooks/registering-webhooks","_dir":"webhooks","_draft":false,"_partial":false,"_locale":"","title":"Register Webhooks","description":"In order to receive Telegram updates through a webhook, it has to be registered to a specific bot. This can be accomplished both programmatically and through an artisan command","navigation":{"title":"Register Webhooks"},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to receive Telegram updates through a webhook, it has to be registered to a specific bot. This can be accomplished both programmatically and through an artisan command"}]},{"type":"element","tag":"h3","props":{"id":"artisan-command"},"children":[{"type":"text","value":"artisan command"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can register a webhook calling the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"telegraph:set-webhook"}]},{"type":"text","value":" artisan command:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes github-dark github-light","code":"php artisan telegraph:set-webhook\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"php"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" artisan"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" telegraph:set-webhook\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"programmatically"},"children":[{"type":"text","value":"programmatically"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"if you are implementing a custom bot management logic, you can register a webhok using the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"TelegraphBot"}]},{"type":"text","value":" model:"}]},{"type":"element","tag":"pre","props":{"className":"language-php shiki shiki-themes github-dark github-light","code":"/** @var DefStudio\\Telegraph\\Models\\TelegraphBot $telegraphBot */\n\n$telegraphBot->registerWebhook()->send();\n","language":"php","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"/** "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"@var"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" DefStudio\\Telegraph\\Models\\TelegraphBot"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":" $telegraphBot */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"$telegraphBot"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"registerWebhook"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"send"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"();\n"}]}]}]}]},{"type":"element","tag":"alert","props":{"type":"alert"},"children":[{"type":"text","value":"\nManual updates polling is not available if a webhook is set up for the bot. Webhook should be remove first using its \n"},{"type":"element","tag":"a","props":{"href":"/webhooks/deleting-webhooks"},"children":[{"type":"text","value":"unregisterWebhook"}]},{"type":"text","value":"\n method\n"}]},{"type":"element","tag":"h2","props":{"id":"routes"},"children":[{"type":"text","value":"Routes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Telegraph register a route to handle webhook messages. By default, the URL is: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"https://<server_domain>/telegraph/{token}/webhook"}]},{"type":"text","value":", but it can be customized in "},{"type":"element","tag":"a","props":{"href":"/installation#Configuration"},"children":[{"type":"text","value":"telegraph.php config"}]},{"type":"text","value":" file ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"webhook_url"}]},{"type":"text","value":") or entirely disabled (by setting its value to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"null"}]},{"type":"text","value":")"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"artisan-command","depth":3,"text":"artisan command"},{"id":"programmatically","depth":3,"text":"programmatically"},{"id":"routes","depth":2,"text":"Routes"}]}},"_type":"markdown","_id":"content:14.webhooks:2.registering-webhooks.md","_source":"content","_file":"14.webhooks/2.registering-webhooks.md","_extension":"md"}